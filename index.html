<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Jenny ‚Äî Precision Hunt (corrigido - garantido dourados)</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{
  --bg1:#030409; --bg2:#071221; --teal:#14c2c8; --amber:#ffc857; --muted:#9aa4ad;
}
*{box-sizing:border-box;font-family:'Poppins',sans-serif;margin:0;padding:0}
html,body{height:100%}
body{
  background: linear-gradient(180deg,var(--bg1),var(--bg2));
  color:#e6eef2;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  -webkit-font-smoothing:antialiased;
}
canvas#bg{position:fixed;inset:0;z-index:0;pointer-events:none}

.wrap{position:relative;z-index:2;width:min(980px,96%);margin:24px;padding:20px;border-radius:16px;
  background: linear-gradient(180deg, rgba(8,12,16,0.6), rgba(6,9,12,0.6));
  box-shadow:0 12px 40px rgba(2,6,12,0.7);border:1px solid rgba(20,194,200,0.06);overflow:visible;}

.header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.title{display:flex;gap:12px;align-items:center}
.logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--teal),#8ff0f3);
  display:flex;align-items:center;justify-content:center;color:#021114;font-weight:700;font-size:20px;box-shadow:0 6px 18px rgba(20,194,200,0.12);}
h1{font-size:18px;margin:0}
.lead{color:var(--muted);font-size:13px;margin-top:2px}

.controls{display:flex;gap:8px;align-items:center}
.btn{background:transparent;border:1px solid rgba(230,238,242,0.06);padding:8px 10px;border-radius:10px;color:var(--amber);cursor:pointer;font-weight:600}

/* layout */
.main{display:grid;grid-template-columns:1fr 300px;gap:14px;align-items:start}
.arena{position:relative;height:560px;border-radius:12px;overflow:hidden;background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.02)}
.hud{position:absolute;left:12px;top:12px;display:flex;gap:8px;align-items:center;background:rgba(2,6,8,0.5);padding:8px;border-radius:10px;border:1px solid rgba(255,255,255,0.02)}
.hud .item{font-size:13px;color:var(--muted)}
.progress{height:8px;background:rgba(255,255,255,0.04);border-radius:999px;overflow:hidden;width:160px;margin-left:6px}
.progress>i{display:block;height:100%;background:linear-gradient(90deg,var(--teal),var(--amber));width:0%}

/* phrase overlay - booky */
.phrase-overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;z-index:40;opacity:0;transition:opacity .35s}
.phrase-card{pointer-events:none;background:linear-gradient(90deg,rgba(6,9,12,.95),rgba(8,12,14,.95));padding:28px 36px;border-radius:16px;max-width:88%;text-align:center;color:#fffdf8;font-family:'Poppins',sans-serif}
.phrase-card.book{font-family:serif}
.phrase-line{display:flex;flex-wrap:wrap;gap:12px;justify-content:center}
.phrase-word{display:inline-block;padding:10px 14px;border-radius:10px;font-weight:700;font-size:22px;color:#fff;background:rgba(255,214,150,0.04);transform:translateY(18px);opacity:0;transition:all .38s}
.phrase-word.reveal{transform:translateY(0);opacity:1;background:linear-gradient(90deg,rgba(255,214,150,0.18),rgba(246,200,95,0.04));color:#081217;box-shadow:0 12px 36px rgba(255,200,87,0.06)}

/* target styling */
.target{position:absolute;display:flex;align-items:center;justify-content:center;border-radius:50%;user-select:none;cursor:pointer;box-shadow:0 8px 22px rgba(0,0,0,.45);transition:transform .16s}
.target.good{background:linear-gradient(180deg,#ffd98a,#ffc857);color:#071114;border:2px solid rgba(255,214,150,.28)}
.target.bad{background:linear-gradient(180deg,#9aa0a4,#7f8a8f);color:#071114;border:1px solid rgba(0,0,0,.15);opacity:.95}

/* emoji */
.emoji{position:fixed;z-index:50;pointer-events:none;font-size:20px;will-change:transform,opacity}

/* panel */
.panel{padding:14px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.02);height:560px}
.panel h3{margin:0 0 8px 0;font-size:15px}
.panel .instr{color:var(--muted);font-size:13px;margin-bottom:12px}
.stat{display:flex;justify-content:space-between;color:var(--muted);margin-bottom:8px}
@media(max-width:900px){.main{grid-template-columns:1fr}.phrase-card{padding:20px}}
</style>
</head>
<body>

<canvas id="bg"></canvas>

<div class="wrap" role="application" aria-label="Jogo para Jenny">
  <div class="header">
    <div class="title">
      <div class="logo">J</div>
      <div>
        <h1>Jenny ‚Äî Precision Hunt</h1>
        <div class="lead">Acerte os alvos dourados.</div>
      </div>
    </div>
    <div class="controls">
      <button id="restart" class="btn">Reiniciar</button>
      <button id="help" class="btn">Como jogar</button>
    </div>
  </div>

  <div class="main">
    <div class="arena" id="arena" tabindex="0" aria-live="polite">
      <div class="hud">
        <div class="item">Acertos: <strong id="hits">0</strong>/<span id="goal">5</span></div>
        <div class="progress" title="Progresso"><i id="prog"></i></div>
      </div>

      <div class="phrase-overlay" id="phraseOverlay" aria-hidden="true">
        <div class="phrase-card" id="phraseCard"><div class="phrase-line" id="phraseLine"></div></div>
      </div>
    </div>

    <aside class="panel" aria-hidden="false">
      <h3>Objetivo</h3>
      <div class="instr">Acerte os alvos dourados. Cada objetivo conclu√≠do mostra uma frase em destaque. Depois, novo objetivo (+5).</div>
      <div class="stat"><span>Acertos</span><span id="hitsPanel">0</span></div>
      <div class="stat"><span>Objetivo atual</span><span id="goalPanel">5</span></div>
    </aside>
  </div>
</div>

<script>
/* frases */
const elogios = [
  "Voc√™ √© radiante demais ‚ú®",
  "Seu sorriso foi a coisa mais linda que j√° vi",
  "Que covinhas s√£o aquelas?",
  "Sempre dou zoom nos seus lindos olhos",
  "Voc√™ tem uma vibe muito boa",
  "Como eu queria deitar e papear com voc√™",
  "Acho top sua sinceridade",
  "Eu sou muito desocupado KKKKK",
  "Voc√™ √© maravilhosa",
  "A melhor futura professora",
  "Fico feliz falando com voc√™",
  "Eu e voc√™ olhando o mar sentado na cadeira de praia üëÄüåÖ‚õ¥Ô∏èüåä",
  "Me divirto KKKKKKKKK",
  "Caraca como assim j√° s√£o 3h",
  "E a√≠ Jenny, v√™ logo meus filmes sua enrolona",
  "Mulholland √© a sua cara",
  "ü´µ‚ù§Ô∏è",
  "Agora eu durmo, juro",
  "Amo sua voz",
  "Ihhhh, janeiro passando voado",
  "A gente tem uns gostos parecidos at√©",
  "Tanta coisa pra sonhar com a gente e voc√™ sonhou com n√≥s brigando",
  "Que covinhas Jenny",
  "Comeu pizza e eu p√£o com ovo, sua sorte √© que voc√™ √© linda"
];

const arena = document.getElementById('arena');
const hitsEl = document.getElementById('hits');
const hitsPanel = document.getElementById('hitsPanel');
const goalEl = document.getElementById('goal');
const goalPanel = document.getElementById('goalPanel');
const progEl = document.getElementById('prog');
const phraseOverlay = document.getElementById('phraseOverlay');
const phraseCard = document.getElementById('phraseCard');
const phraseLine = document.getElementById('phraseLine');

let targets = [];
let hits = 0;
let baseGoal = 5;
let currentGoal = baseGoal;
let phraseIndex = 0;
let rafId = null;

/* settings */
const settings = {
  speedBase: 1.2,
  decoyRate: 0.28,
  teleportChance: 0.06,
  maxTargets: 8,
  sizeMin: 44,
  sizeMax: 64
};

/* spawn single target inside arena */
function spawnTarget(isGood){
  const t = document.createElement('div');
  t.className = 'target ' + (isGood ? 'good' : 'bad');
  t.dataset.good = isGood ? '1' : '0';
  const size = settings.sizeMin + Math.random() * (settings.sizeMax - settings.sizeMin);
  t.style.width = size + 'px';
  t.style.height = size + 'px';
  t.style.lineHeight = size + 'px';
  t.style.fontSize = Math.max(12, size/2.6) + 'px';

  const rect = arena.getBoundingClientRect();
  const left = Math.random() * (rect.width - size);
  const top = Math.random() * (rect.height - size);
  t.style.left = left + 'px';
  t.style.top  = top + 'px';

  const obj = { el: t, size, vx: (Math.random()-0.5)*settings.speedBase, vy: (Math.random()-0.5)*settings.speedBase, speedMult: 0.8 + Math.random()*1.4 };

  t.addEventListener('pointerdown', ev => { ev.preventDefault(); ev.stopPropagation(); handleHit(obj, ev); });

  arena.appendChild(t);
  targets.push(obj);
}

/* handle hit (fixed getBoundingClientRect usage) */
function handleHit(obj, ev){
  const el = obj.el;
  const isGood = el.dataset.good === '1';
  const rect = obj.el.getBoundingClientRect();
  const cx = rect.left + rect.width/2;
  const cy = rect.top + rect.height/2;

  if(isGood){
    const pop = el.animate([{transform:'scale(1)', opacity:1},{transform:'scale(1.18)',opacity:1},{transform:'scale(0)',opacity:0}], { duration:220, easing:'cubic-bezier(.2,.8,.2,1)'});
    pop.onfinish = () => {
      explodeAt(cx,cy);
      removeTarget(obj);
      hits++;
      updateUI();
      if(hits>=currentGoal){
        const idx = phraseIndex % elogios.length;
        const phrase = elogios[idx] || '';
        const isLast = (idx === elogios.length - 1);
        phraseIndex++;
        clearAllTargets();
        revealPhraseBig(phrase, isLast, () => {
          baseGoal += 5; currentGoal = baseGoal; hits = 0; updateUI(); setTimeout(spawnWave, 600);
        });
      } else {
        if(targets.length < settings.maxTargets) setTimeout(spawnWave, 420 + Math.random()*600);
      }
    };
  } else {
    // decoy feedback
    el.animate([{transform:'scale(1) rotate(0deg)'},{transform:'scale(1.12) rotate(-6deg)'},{transform:'scale(1) rotate(6deg)'},{transform:'scale(1)'}], { duration:320, easing:'ease-out'});
    flashSmall('Isca!');
  }
}

function removeTarget(obj){ try{ obj.el.remove(); } catch(e){}; targets = targets.filter(t => t !== obj); }
function clearAllTargets(){ for(const o of targets) try{o.el.remove();}catch(e){} targets = []; }

/* spawnWave: GUARANTEE at least some good (60%) */
function spawnWave(){
  const desired = Math.min(settings.maxTargets, 4 + Math.floor(Math.random()*6));
  // ensure at least 60% good targets (rounded)
  const goodCount = Math.max(1, Math.round(desired * 0.6));
  let spawned = 0;
  for(let i=0;i<goodCount;i++){ spawnTarget(true); spawned++; }
  while(spawned < desired){
    // remaining spots: random decoy or good (keeps variety)
    const isDecoy = Math.random() < settings.decoyRate;
    spawnTarget(!isDecoy);
    spawned++;
  }
}

/* movement loop */
function animateTargets(){
  const rect = arena.getBoundingClientRect();
  for(const obj of targets){
    let left = parseFloat(obj.el.style.left || 0);
    let top  = parseFloat(obj.el.style.top || 0);
    obj.vx += (Math.random()-0.5) * 0.25 * obj.speedMult;
    obj.vy += (Math.random()-0.5) * 0.25 * obj.speedMult;

    const mx = (window.mouseX !== undefined) ? window.mouseX - rect.left : -9999;
    const my = (window.mouseY !== undefined) ? window.mouseY - rect.top : -9999;
    const cx = left + obj.size/2;
    const cy = top + obj.size/2;
    const dist = Math.hypot(cx - mx, cy - my);

    if(dist < 110){
      const awayX = (cx - mx) / (dist || 1);
      const awayY = (cy - my) / (dist || 1);
      obj.vx += awayX * (0.8 + Math.random()*1.8) * obj.speedMult;
      obj.vy += awayY * (0.8 + Math.random()*1.8) * obj.speedMult;
      if(Math.random() < settings.teleportChance){
        obj.el.style.left = Math.random() * (rect.width - obj.size) + 'px';
        obj.el.style.top  = Math.random() * (rect.height - obj.size) + 'px';
        obj.vx = (Math.random()-0.5) * settings.speedBase;
        obj.vy = (Math.random()-0.5) * settings.speedBase;
        continue;
      }
    }

    const maxV = settings.speedBase * obj.speedMult;
    obj.vx = Math.max(-maxV, Math.min(maxV, obj.vx));
    obj.vy = Math.max(-maxV, Math.min(maxV, obj.vy));

    let nx = left + obj.vx;
    let ny = top + obj.vy;
    if(nx < 0){ nx = 0; obj.vx *= -0.8; }
    if(ny < 0){ ny = 0; obj.vy *= -0.8; }
    if(nx > rect.width - obj.size){ nx = rect.width - obj.size; obj.vx *= -0.8; }
    if(ny > rect.height - obj.size){ ny = rect.height - obj.size; obj.vy *= -0.8; }

    obj.el.style.left = nx + 'px';
    obj.el.style.top  = ny + 'px';
  }
  rafId = requestAnimationFrame(animateTargets);
}

/* explode emojis */
function explodeAt(x,y){
  const emojis = ['‚ú®','üåü','üíñ','üî•','üí´','üòç'];
  for(let i=0;i<12;i++){
    const el = document.createElement('div');
    el.className = 'emoji';
    el.innerText = emojis[Math.floor(Math.random()*emojis.length)];
    el.style.left = (x + (Math.random()-0.5)*60) + 'px';
    el.style.top  = (y + (Math.random()-0.5)*60) + 'px';
    el.style.fontSize = (12 + Math.random()*18) + 'px';
    document.body.appendChild(el);
    const dx = (Math.random()-0.5)*160;
    const dy = - (60 + Math.random()*220);
    el.animate([{transform:'translate(0,0) scale(1)', opacity:1}, {transform:`translate(${dx}px,${dy}px) rotate(${Math.random()*360}deg) scale(.8)`, opacity:0}], { duration:900 + Math.random()*600, easing:'cubic-bezier(.2,.8,.2,1)' });
    setTimeout(()=>{ try{ el.remove(); }catch(e){} }, 1600);
  }
}

/* small message */
function flashSmall(text){
  const tmp = document.createElement('div');
  tmp.className = 'phrase-card';
  tmp.style.fontSize = '14px';
  tmp.style.padding = '8px 12px';
  tmp.style.position = 'absolute';
  tmp.style.bottom = '18px';
  tmp.style.left = '50%';
  tmp.style.transform = 'translateX(-50%)';
  tmp.innerText = text;
  phraseOverlay.appendChild(tmp);
  phraseOverlay.style.opacity = 1;
  setTimeout(()=>{ tmp.style.opacity = 0; try{ tmp.remove(); }catch(e){} }, 700);
  setTimeout(()=>{ if(!phraseOverlay.children.length) phraseOverlay.style.opacity = 0; }, 900);
}

/* update HUD */
function updateUI(){
  hitsEl.innerText = hits;
  hitsPanel.innerText = hits;
  goalEl.innerText = currentGoal;
  goalPanel.innerText = currentGoal;
  progEl.style.width = Math.min(100, Math.round((hits/currentGoal)*100)) + '%';
}

/* reveal phrase (book style if isFinal) */
let phraseTimeouts = [];
function clearPhraseReveal(){ phraseTimeouts.forEach(id=>clearTimeout(id)); phraseTimeouts=[]; phraseLine.innerHTML=''; phraseOverlay.style.opacity = 0; phraseCard.classList.remove('book'); }

function revealPhraseBig(phrase, isFinal, onDone){
  clearPhraseReveal();
  if(isFinal) phraseCard.classList.add('book');
  phraseOverlay.style.opacity = 1;
  phraseOverlay.setAttribute('aria-hidden','false');

  const words = phrase.split(' ');
  words.forEach((w,i) => {
    const sp = document.createElement('div');
    sp.className = 'phrase-word';
    sp.textContent = w + (i<words.length-1 ? ' ' : '');
    phraseLine.appendChild(sp);
  });

  const chips = Array.from(phraseLine.children);
  const interval = isFinal ? 520 : 300;
  const revealDur = isFinal ? 520 : 380;
  chips.forEach((chip,i) => {
    const t = setTimeout(()=> {
      chip.classList.add('reveal');
      chip.animate([{transform:'translateY(18px) scale(.98)', opacity:0}, {transform:'translateY(0) scale(1.02)', opacity:1}], { duration: revealDur, easing:'cubic-bezier(.2,.8,.2,1)' });
    }, i * interval + 160);
    phraseTimeouts.push(t);
  });

  const extra = isFinal ? 4200 : 1400;
  const total = chips.length * interval + extra;
  const end = setTimeout(()=> {
    phraseOverlay.style.opacity = 0;
    phraseOverlay.setAttribute('aria-hidden','true');
    phraseCard.classList.remove('book');
    phraseLine.innerHTML = '';
    if(typeof onDone === 'function') onDone();
  }, total);
  phraseTimeouts.push(end);
}

/* start game */
function startGame(){
  clearAllTargets();
  clearPhraseReveal();
  hits = 0;
  baseGoal = 5;
  currentGoal = baseGoal;
  phraseIndex = 0;
  updateUI();
  spawnWave();
  if(!rafId) animateTargets();
}

/* bindings */
document.getElementById('restart').addEventListener('click', startGame);
document.getElementById('help').addEventListener('click', ()=> alert('Clique nos alvos dourados. Evite iscas. A cada objetivo conclu√≠do, uma frase aparece lentamente.'));
window.addEventListener('mousemove', e => { window.mouseX = e.clientX; window.mouseY = e.clientY; });
window.addEventListener('touchmove', e => { if(e.touches && e.touches[0]){ window.mouseX = e.touches[0].clientX; window.mouseY = e.touches[0].clientY; } }, { passive:false });

/* subtle bg particles */
(function bgParticles(){
  const c = document.getElementById('bg'); if(!c) return;
  const ctx = c.getContext('2d');
  function resize(){ c.width = innerWidth; c.height = innerHeight; }
  window.addEventListener('resize', resize); resize();
  const parts = Array.from({length:160}, ()=>({ x:Math.random()*c.width, y:Math.random()*c.height, r:Math.random()*1.6+0.4, vy:0.1+Math.random()*0.6, hue:180+Math.random()*80, alpha:0.04+Math.random()*0.12 }));
  (function draw(){ ctx.clearRect(0,0,c.width,c.height); for(const p of parts){ ctx.beginPath(); ctx.fillStyle = `hsla(${p.hue},80%,60%,${p.alpha})`; ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill(); p.y -= p.vy; if(p.y < -10){ p.y = c.height + 10; p.x = Math.random()*c.width; } } requestAnimationFrame(draw); })();
})();

/* kick off */
startGame();
</script>

</body>
</html>